import{A as V}from"./AdminLayout-b0f32dd7.js";import{_ as j,T as U,r as u,o as r,c as a,a as h,b as t,F as m,h as f,w as p,v,k as z,f as S,s as M,d as E,t as _,q as I,j as L}from"./app-a0f2337f.js";import{E as R,r as C,I as F}from"./ImagePreview-0791be06.js";const O={data(){return{urlMainPhotos:[],urlVariantPhotos:[]}},components:{Editor:R,PhotoIcon:C,ImagePreview:F},props:{product:Object,categories:Object,colors:Object,sizes:Object,stocks:Object},watch:{"form.colors"(){this.initializeVariant()}},methods:{formattedPrice(){let s=this.form.price.replace(/\D/g,"");s=s.replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.form.price=s},initializeVariant(){for(const s in this.form.colors){let e=this.form.colors[s];this.form.variant_photos[e]||(this.form.variant_photos[e]=""),this.form.stocks[e.id]||(this.form.stocks[e.id]={});for(const d in this.sizes){let i=this.sizes[d];this.form.stocks[e.id][i.id]||(this.form.stocks[e.id][i.id]=0)}}},uploadMainPhoto(s){this.form.main_photos[s]=event.target.files[0],this.urlMainPhotos[s]=URL.createObjectURL(event.target.files[0]),s<4&&this.form.main_photos.push("")},uploadVariantPhoto(s){this.form.variant_photos[s]=event.target.files[0],this.urlVariantPhotos[s]=URL.createObjectURL(event.target.files[0])},removeMainPhoto(s){this.form.main_photos.splice(s,1),this.urlMainPhotos.splice(s,1),(this.form.main_photos.length===0||this.form.main_photos[this.form.main_photos.length-1]!=="")&&this.form.main_photos.push("")},removeVariantPhoto(s){this.form.variant_photos[s]="",this.urlVariantPhotos[s]=""},updateShoe(){this.form.price=this.form.price.replace(/\D/g,""),this.form.post(route("products.update",this.product),{preserveScroll:!0})}},created(){this.initializeVariant(),this.form.main_photos.length<5&&this.form.main_photos.push("")},setup(s){const e=U({_method:"put",main_photos:[""],category:"",name:"",price:"",description:"",colors:[],variant_photos:[""],stocks:{}}),d=s.product;return e.main_photos=d.main_photos,e.category=d.category,e.name=d.name,e.price=d.price.toLocaleString("id-ID"),e.description=d.description,e.variant_photos=d.variant_photos,e.stocks=s.stocks,d.colors.forEach((i,x)=>{e.colors[x]=i}),{form:e}},layout:V},B={class:"w-3/4 mx-auto pt-6 pb-12"},D=t("div",{class:"text-xl font-semibold mb-6"},"Edit Produk",-1),N={class:"p-8 bg-white rounded shadow space-y-6 mb-6"},T={class:"text-sm flex gap-10 items-top"},H=t("div",{class:"w-[20%]"},[t("div",{class:"font-medium mb-2"},"Foto Produk"),t("div",{class:"text-xs text-zinc-500"}," Format gambar .jpg .jpeg .png dan rasio 1:1 (persegi). ")],-1),q={class:"flex-1 grid grid-cols-5 gap-2"},A=["for"],W={class:"w-full aspect-square flex flex-col gap-2 items-center justify-center rounded border border-dashed border-gray-300 hover:border-lime-600 text-zinc-500 hover:text-lime-600 overflow-hidden"},K={class:"text-xs select-none"},G=["id","onChange"],J={class:"text-sm flex items-center gap-10"},Q=t("div",{class:"w-[20%] font-medium"},"Nama Produk",-1),X={class:"text-sm flex items-center gap-10"},Y=t("div",{class:"w-[20%] font-medium"},"Kategori Produk",-1),Z=t("option",{disabled:"",value:""},"Pilih kategori",-1),$=["value"],tt={class:"text-sm flex items-center gap-10"},et=t("div",{class:"w-[20%] font-medium"},"Harga",-1),ot={class:"flex-1 flex items-center border border-gray-200 bg-gray-100 rounded-md overflow-hidden w-fit"},st=t("div",{class:"text-sm text-gray-500 font-semibold px-3"},"Rp",-1),it={class:"text-sm flex items-top gap-10"},rt=t("div",{class:"w-[20%] font-medium"},"Deskripsi Produk",-1),at={class:"text-sm flex items-top gap-10"},dt=t("div",{class:"w-[20%] font-medium text-sm"},"Warna",-1),nt={class:"flex-1 grid grid-cols-7 gap-y-4"},lt=["value","id"],ct=["for"],mt={class:"flex items-top gap-10"},ht=t("div",{class:"w-[20%] font-medium text-sm"},"Variasi Produk",-1),ft={class:"flex-1 border divide-y text-sm rounded-sm"},ut=M('<div class="flex divide-x font-medium"><div class="w-[30%] px-4 py-2">Foto Produk</div><div class="w-[30%] px-4 py-2">Warna</div><div class="w-[20%] font-medium px-4 py-2">Ukuran</div><div class="w-[20%] font-medium px-4 py-2">Stok</div></div>',1),pt={class:"flex divide-x"},_t={class:"w-[30%] flex justify-center items-center"},vt=["for"],xt={class:"h-28 w-28 flex flex-col gap-2 items-center justify-center rounded-md border border-dashed border-gray-300 hover:border-lime-600 text-zinc-500 hover:text-lime-600 overflow-hidden"},gt=t("div",{class:"text-xs select-none"},"Tambah Foto",-1),bt=["id","onChange"],yt={class:"w-[30%] flex items-center px-4"},kt={class:"w-[20%] divide-y"},wt={class:"px-4 py-2"},Pt={class:"w-[20%] divide-y"},Vt=["onUpdate:modelValue"],jt={class:"flex justify-end gap-3 text-sm font-medium"};function Ut(s,e,d,i,x,c){const y=u("Head"),g=u("ImagePreview"),b=u("PhotoIcon"),k=u("Editor"),w=u("Link");return r(),a(m,null,[h(y,{title:"Edit Produk"}),t("div",B,[D,t("div",N,[t("div",T,[H,t("div",q,[(r(!0),a(m,null,f(i.form.main_photos,(o,n)=>(r(),a("div",{key:n},[o?(r(),E(g,{key:0,source:o.url,onRemovePhoto:l=>c.removeMainPhoto(n)},null,8,["source","onRemovePhoto"])):(r(),a("label",{key:1,for:"mainPhotos"+n,class:"h-full flex flex-col items-center justify-center cursor-pointer"},[t("div",W,[h(b,{class:"w-8 h-8"}),t("div",K,"Foto "+_(n==0?"Sampul":"("+n+"/5)"),1)]),t("input",{id:"mainPhotos"+n,type:"file",class:"hidden",onChange:l=>c.uploadMainPhoto(n)},null,40,G)],8,A))]))),128))])]),t("div",J,[Q,p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.form.name=o),type:"text",class:"flex-1 text-sm border-gray-200 rounded-md"},null,512),[[v,i.form.name]])]),t("div",X,[Y,p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>i.form.category=o),class:"text-sm border-gray-200 rounded-md flex-1"},[Z,(r(!0),a(m,null,f(d.categories,o=>(r(),a("option",{value:o},_(o.name),9,$))),256))],512),[[z,i.form.category]])]),t("div",tt,[et,t("div",ot,[st,p(t("input",{type:"text",class:"text-sm border-0 focus:ring-0 w-full","onUpdate:modelValue":e[2]||(e[2]=o=>i.form.price=o),onInput:e[3]||(e[3]=(...o)=>c.formattedPrice&&c.formattedPrice(...o))},null,544),[[v,i.form.price]])])]),t("div",it,[rt,h(k,{modelValue:i.form.description,"onUpdate:modelValue":e[4]||(e[4]=o=>i.form.description=o),class:"flex-1"},null,8,["modelValue"])]),t("div",at,[dt,t("div",nt,[(r(!0),a(m,null,f(d.colors,(o,n)=>(r(),a("div",{key:o,class:"flex items-center"},[p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>i.form.colors=l),value:o,id:"color"+o.id,type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-200 rounded focus:ring-blue-500"},null,8,lt),[[I,i.form.colors]]),t("label",{for:"color"+o.id,class:"ml-2 text-sm"},_(o.name),9,ct)]))),128))])]),t("div",mt,[ht,t("div",ft,[ut,(r(!0),a(m,null,f(i.form.colors,(o,n)=>(r(),a("div",pt,[t("div",_t,[i.form.variant_photos[n]?(r(),a("div",{key:n,class:"flex justify-center h-28 w-28"},[h(g,{source:i.form.variant_photos[n].url,onRemovePhoto:l=>c.removeVariantPhoto(o.id)},null,8,["source","onRemovePhoto"])])):(r(),a("label",{key:1,for:"variant_photos"+o.id,class:"flex flex-col items-center cursor-pointer"},[t("div",xt,[h(b,{class:"w-8 h-8"}),gt]),t("input",{id:"variant_photos"+o.id,type:"file",class:"hidden",onChange:l=>c.uploadVariantPhoto(o.id)},null,40,bt)],8,vt))]),t("div",yt,_(o.name),1),t("div",kt,[(r(!0),a(m,null,f(d.sizes,l=>(r(),a("div",wt,_(l.name),1))),256))]),t("div",Pt,[(r(!0),a(m,null,f(d.sizes,l=>(r(),a("div",null,[p(t("input",{type:"number",class:"w-full text-sm border-0 px-4","onUpdate:modelValue":P=>i.form.stocks[o.id][l.id]=P},null,8,Vt),[[v,i.form.stocks[o.id][l.id]]])]))),256))])]))),256))])])]),t("div",jt,[t("div",null,[h(w,{href:s.route("products.index"),class:"block border bg-white py-2 px-10 rounded"},{default:S(()=>[L(" Batal ")]),_:1},8,["href"])]),t("div",null,[t("button",{type:"button",onClick:e[6]||(e[6]=(...o)=>c.updateShoe&&c.updateShoe(...o)),class:"bg-lime-600 hover:bg-lime-700 text-white py-2 px-10 rounded"}," Simpan ")])])])],64)}const Et=j(O,[["render",Ut]]);export{Et as default};
