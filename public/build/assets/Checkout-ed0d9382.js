import{U as g}from"./UserLayout-774ee41c.js";import A from"./List-f9c84fc3.js";import C from"./Create-5b5b52ba.js";import{_ as O,T as L,r as m,o as r,c,a as p,d as w,e as _,b as e,t,j as k,w as u,p as f,F as h,h as P,n as j}from"./app-e00fb960.js";import"./dialog-ed01fe28.js";import"./use-outside-click-2a9cf22d.js";import"./MagnifyingGlassIcon-d05987a5.js";import"./XMarkIcon-d2224846.js";import"./CheckCircleIcon-b5e872bb.js";import"./XMarkIcon-e47da2f3.js";const D={data(){return{addressListOpen:!1,addressCreateOpen:!1,selectedAddress:this.mainAddress}},props:{addresses:Object,mainAddress:Object,carts:Object,totalPrice:Number,flash:Object},components:{AddressList:A,AddressCreate:C},methods:{openAddressList(){this.addressListOpen=!0},closeAddressList(d){this.addressListOpen=!1,d&&(this.selectedAddress=d,this.form.address_id=d.id,this.updatePayment(d))},openAddressCreate(){this.addressListOpen=!1,this.addressCreateOpen=!0},closeAddressCreate(){this.addressCreateOpen=!1,this.addressListOpen=!0},createOrder(){this.form.post(route("orders.store"))},async updatePayment(d){const o=await axios.get(route("shipping.tariff-check"),{params:{district:d.district.name,weight:this.$page.props.cartQuantity}}),n=JSON.parse(o.data.content),i=parseInt(n[0].cost,10);this.form.shipping_fee=i,this.form.total_payment=i+this.totalPrice}},async mounted(){this.selectedAddress?await this.updatePayment(this.selectedAddress):this.openAddressCreate()},setup(d){return{form:L({payment_type:"",address_id:d.mainAddress?d.mainAddress.id:null,total_price:d.totalPrice,shipping_fee:"",total_payment:""})}},layout:g},B={class:"px-4 xl:px-24 py-10"},N=e("div",{class:"text-xl font-bold mb-6"},"Checkout",-1),R={class:"flex flex-col xl:flex-row gap-8 xl:gap-10"},S={class:"flex-1 space-y-8"},I=e("div",{class:"font-semibold mb-2"},"Alamat Pengiriman",-1),M={key:0,class:"border flex gap-4 justify-between items-center p-4 rounded-xl"},T={class:"flex-1 text-sm"},V={class:"font-semibold line-clamp-1"},U={class:"line-clamp-1"},F=e("span",{class:"hidden xl:inline"},"Alamat",-1),H={key:1,class:"px-6 py-4 rounded-xl bg-slate-100 font-medium text-slate-400"},z=e("div",{class:"font-semibold mb-2"},"Metode Pembayaran",-1),q={class:"grid xl:grid-cols-2 gap-2 xl:gap-4 text-sm font-medium"},E={for:"cashless",class:"border p-4 rounded-xl flex items-center justify-between"},G=e("div",null,"Pembayaran non-tunai",-1),J={for:"cod",class:"border p-4 rounded-xl flex items-center justify-between"},K=e("div",null,"COD (Bayar di Tempat)",-1),Q=e("div",{class:"font-semibold mb-4"},"Detail Pembelian",-1),W={class:"space-y-4"},X={class:"flex gap-4 text-sm"},Y=["src"],Z={class:"flex-1 text-sm"},$={class:"line-clamp-1 font-semibold"},ee={class:"text-slate-600"},se={class:"flex gap-2"},te={key:0,class:"text-slate-400 line-through font-medium"},de={class:"xl:w-1/3"},oe={class:"border rounded-xl p-6"},ie=e("div",{class:"font-semibold mb-4"},"Ringkasan Pembayaran",-1),ne={class:"space-y-2 text-sm text-slate-600 my-4"},le={class:"flex justify-between"},ae=e("div",null,"Total Harga",-1),re={class:"flex justify-between"},ce=e("div",null,"Total Ongkos Kirim",-1),me={class:"border-t py-4 mb-4 flex justify-between font-semibold"},pe=e("div",null,"Total Belanja",-1),_e=["disabled"];function ue(d,o,n,i,l,a){const b=m("Head"),x=m("Notif"),y=m("AddressList"),v=m("AddressCreate");return r(),c(h,null,[p(b,{title:"Checkout"}),n.flash.error||n.flash.success?(r(),w(x,{key:0,flash:n.flash},null,8,["flash"])):_("",!0),p(y,{isOpen:l.addressListOpen,onAddAddress:a.openAddressCreate,onCloseModal:a.closeAddressList,userAddresses:n.addresses,address:l.selectedAddress},null,8,["isOpen","onAddAddress","onCloseModal","userAddresses","address"]),p(v,{isOpen:l.addressCreateOpen,onCloseModal:a.closeAddressCreate,mainAddress:n.mainAddress},null,8,["isOpen","onCloseModal","mainAddress"]),e("div",B,[N,e("div",R,[e("div",S,[e("div",null,[I,l.selectedAddress?(r(),c("div",M,[e("div",T,[e("div",V,t(l.selectedAddress.name),1),e("div",null,t(l.selectedAddress.phone_number),1),e("div",U,t(l.selectedAddress.detail),1)]),e("button",{type:"button",onClick:o[0]||(o[0]=(...s)=>a.openAddressList&&a.openAddressList(...s)),class:"rounded-full px-4 py-2 font-semibold border border-lime-600 text-lime-600 text-sm"},[k(" Ganti "),F])])):(r(),c("div",H," Belum ada alamat tersimpan "))]),e("div",null,[z,e("div",q,[e("label",E,[G,u(e("input",{id:"cashless",type:"radio",name:"payment_type","onUpdate:modelValue":o[1]||(o[1]=s=>i.form.payment_type=s),value:"cashless",class:"w-5 h-5 text-lime-600 focus:ring-lime-600"},null,512),[[f,i.form.payment_type]])]),e("label",J,[K,u(e("input",{id:"cod",type:"radio",name:"payment_type","onUpdate:modelValue":o[2]||(o[2]=s=>i.form.payment_type=s),value:"cod",class:"w-5 h-5 text-lime-600 focus:ring-lime-600"},null,512),[[f,i.form.payment_type]])])])]),e("div",null,[Q,e("div",W,[(r(!0),c(h,null,P(n.carts,s=>(r(),c("div",X,[e("div",null,[e("img",{src:"/storage/products/"+s.product.code+"/"+s.photo,class:"w-20 border border-gray-200 bg-white rounded-lg p-1"},null,8,Y)]),e("div",Z,[e("div",$,t(s.product.name),1),e("div",ee,t(s.quantity)+"x "+t(s.color.name)+", "+t(s.size.name),1),e("div",se,[e("div",{class:j(["font-semibold",{"text-red-600":s.product.is_discount}])}," Rp"+t((s.product.is_discount?s.product.discount_price:s.product.price).toLocaleString("id-ID")),3),s.product.is_discount?(r(),c("div",te," Rp"+t(s.product.price.toLocaleString("id-ID")),1)):_("",!0)])])]))),256))])])]),e("div",de,[e("div",oe,[ie,e("div",ne,[e("div",le,[ae,e("div",null,"Rp"+t(n.totalPrice.toLocaleString("id-ID")),1)]),e("div",re,[ce,e("div",null,"Rp"+t(i.form.shipping_fee.toLocaleString("id-ID")),1)])]),e("div",me,[pe,e("div",null,"Rp"+t(i.form.total_payment.toLocaleString("id-ID")),1)]),e("button",{type:"button",onClick:o[3]||(o[3]=(...s)=>a.createOrder&&a.createOrder(...s)),disabled:!i.form.shipping_fee,class:"bg-lime-600 hover:bg-lime-700 disabled:bg-slate-200 disabled:text-slate-500 py-3 w-full rounded-full font-semibold text-white text-center"}," Buat Pesanan ",8,_e)])])])])],64)}const Le=O(D,[["render",ue]]);export{Le as default};
