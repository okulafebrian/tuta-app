import{U as v}from"./UserLayout-774ee41c.js";import{S as g}from"./Account-13d156ce.js";import{_ as y,T as N,r as m,o as a,c as n,a as h,d as k,e as u,b as t,n as f,w as b,v as p,t as x,F as P}from"./app-e00fb960.js";import"./dialog-ed01fe28.js";import"./use-outside-click-2a9cf22d.js";import"./MagnifyingGlassIcon-d05987a5.js";import"./XMarkIcon-d2224846.js";import"./CheckCircleIcon-b5e872bb.js";const E={data(){return{showEditName:!1,showEditPhone:!1,disableUpdateName:!0,disableUpdatePhone:!0}},components:{Sidebar:g},props:{auth:Object,flash:Object},methods:{validateName(){this.form.name.length>30&&(this.form.name=this.form.name.slice(0,30))},validatePhone(){this.form.phone_number=this.form.phone_number.replace(/[^0-9]/g,""),this.form.phone_number.length>15&&(this.form.phone_number=this.form.phone_number.slice(0,15))},updateName(){this.form.post(route("account.update-name",this.auth.user),{preserveState:!1})},updatePhone(){this.form.post(route("account.update-phone",this.auth.user),{preserveState:!1})}},computed:{allowUpdatePhone(){const i=new Date(this.auth.user.phone_last_update_date),e=new Date;return Math.abs((e.getFullYear()-i.getFullYear())*12+(e.getMonth()-i.getMonth()))>=2}},watch:{"form.name"(){this.disableUpdateName=!1},"form.phone_number"(){this.disableUpdatePhone=!1}},setup(i){return{form:N({_method:"put",name:i.auth.user.name,phone_number:i.auth.user.phone_number})}},layout:v},U={class:"xl:px-36 py-10 flex flex-col xl:flex-row xl:gap-20"},D={class:"flex-1 p-4 xl:p-0"},B=t("div",{class:"hidden xl:block text-xl font-semibold mb-6"},"Biodata Diri",-1),C={class:"text-sm w-full"},S=t("div",{class:"font-semibold mb-1"},"Nama Lengkap",-1),j={key:0,class:"flex flex-col xl:flex-row xl:items-center justify-between gap-4"},V={class:"flex gap-3"},F=["disabled"],M={key:1},H={class:"text-sm w-full"},L=t("div",{class:"font-semibold mb-1"},"Nomor HP",-1),I={key:0,class:"flex flex-col xl:flex-row xl:items-center justify-between gap-4"},O={class:"flex gap-3"},T={class:"flex gap-2"},Y=["disabled"],q={key:1};function z(i,e,d,r,s,l){const c=m("Head"),w=m("Notif"),_=m("Sidebar");return a(),n(P,null,[h(c,{title:"Biodata Diri"}),d.flash.error||d.flash.success?(a(),k(w,{key:0,flash:d.flash},null,8,["flash"])):u("",!0),t("div",U,[h(_),t("div",D,[B,t("div",{class:f(["flex justify-between items-center rounded-2xl p-4 xl:p-6 mb-4",s.showEditName?"bg-gray-100":"border"])},[t("div",C,[S,s.showEditName?(a(),n("div",j,[b(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>r.form.name=o),onInput:e[1]||(e[1]=(...o)=>l.validateName&&l.validateName(...o)),placeholder:"Nama Depan & Nama Belakang",class:"border-gray-300 rounded-lg text-sm"},null,544),[[p,r.form.name]]),t("div",V,[t("button",{type:"button",onClick:e[2]||(e[2]=o=>s.showEditName=!1),class:"border border-gray-300 bg-white rounded-full px-6 py-2 font-semibold text-sm w-1/2 xl:w-auto"}," Batal "),t("button",{type:"button",onClick:e[3]||(e[3]=(...o)=>l.updateName&&l.updateName(...o)),disabled:s.disableUpdateName,class:"bg-lime-600 hover:bg-lime-700 disabled:bg-slate-300 disabled:text-slate-500 text-white rounded-full px-4 py-2 font-semibold text-sm w-1/2 xl:w-auto"}," Simpan ",8,F)])])):(a(),n("div",M,x(d.auth.user.name),1))]),s.showEditName?u("",!0):(a(),n("button",{key:0,type:"button",onClick:e[4]||(e[4]=o=>s.showEditName=!0),class:"text-sm font-semibold text-lime-600 hover:text-lime-700 p-2"}," Edit "))],2),t("div",{class:f(["flex justify-between items-center rounded-2xl p-4 xl:p-6 mb-4",s.showEditPhone?"bg-gray-100":"border"])},[t("div",H,[L,s.showEditPhone?(a(),n("div",I,[t("div",O,[b(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>r.form.phone_number=o),onInput:e[6]||(e[6]=(...o)=>l.validatePhone&&l.validatePhone(...o)),class:"border-gray-300 rounded-lg text-sm w-full xl:w-auto",required:""},null,544),[[p,r.form.phone_number]])]),t("div",T,[t("button",{type:"button",onClick:e[7]||(e[7]=o=>s.showEditPhone=!1),class:"border border-gray-300 bg-white rounded-full px-6 py-2 font-semibold text-sm w-1/2 xl:w-auto"}," Batal "),t("button",{type:"button",onClick:e[8]||(e[8]=(...o)=>l.updatePhone&&l.updatePhone(...o)),disabled:s.disableUpdateName,class:"bg-lime-600 hover:bg-lime-700 disabled:bg-slate-300 disabled:text-slate-500 text-white rounded-full px-4 py-2 font-semibold text-sm w-1/2 xl:w-auto"}," Simpan ",8,Y)])])):(a(),n("div",q,x(d.auth.user.phone_number),1))]),!s.showEditPhone&&l.allowUpdatePhone?(a(),n("button",{key:0,type:"button",onClick:e[9]||(e[9]=o=>s.showEditPhone=!0),class:"text-sm font-semibold text-lime-600 hover:text-lime-700 p-2"}," Edit ")):u("",!0)],2)])])],64)}const Z=y(E,[["render",z]]);export{Z as default};
