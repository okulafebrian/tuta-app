import{_ as C,r as m,o as l,c,b as e,a as b,n as p,t as n,T as P,d as I,e as k,F as _,h as v,w as y,p as w}from"./app-a0f2337f.js";import{r as S,a as V}from"./PlusIcon-c439d426.js";import{U as N}from"./UserLayout-8888f4ae.js";import"./dialog-462821c4.js";import"./use-outside-click-eb249b35.js";import"./MagnifyingGlassIcon-6744ffad.js";import"./XMarkIcon-9b5d6da3.js";import"./CheckCircleIcon-7c336ff1.js";const z={data(){return{count:this.modelValue}},components:{MinusIcon:S,PlusIcon:V},props:{modelValue:Number,max:Number},watch:{count(){this.$emit("update:modelValue",this.count)}},methods:{decrement(){this.count>1&&this.count--},increment(){this.count<this.max&&this.count++}}},L={class:"flex items-center border rounded-lg"},M={class:"text-sm text-center w-10"};function U(d,s,o,a,i,r){const f=m("MinusIcon"),x=m("PlusIcon");return l(),c("div",L,[e("button",{onClick:s[0]||(s[0]=(...u)=>r.decrement&&r.decrement(...u)),type:"button",class:p(["p-1.5 m-1",i.count===1?"text-slate-400 cursor-not-allowed":"text-lime-600 hover:bg-gray-100 rounded-md"])},[b(f,{class:"w-4 h-4",style:{"stroke-width":"3"}})],2),e("div",M,n(i.count),1),e("button",{onClick:s[1]||(s[1]=(...u)=>r.increment&&r.increment(...u)),type:"button",class:p(["p-1.5 m-1",i.count===o.max?"text-slate-400 cursor-not-allowed":"text-lime-600 hover:bg-gray-100 rounded-md"])},[b(x,{class:"w-4 h-4",style:{"stroke-width":"3"}})],2)])}const j=C(z,[["render",U]]),B={data(){return{selectedPhoto:this.product.photos[0],stock:this.product.stock,sizeStock:[]}},components:{NumberInput:j},props:{product:Object,stocks:Object,flash:Object},methods:{selectPhoto(d){this.selectedPhoto=d},selectColorPhoto(d){this.selectedPhoto=this.product.variant_photos[d]},updateStock(){this.form.color_id&&this.form.size_id&&(this.stock=this.stocks[this.form.color_id][this.form.size_id])},addCart(){this.form.post(route("carts.store"),{preserveState:!1,preserveScroll:!0})}},watch:{"form.color_id"(){this.updateStock(),this.form.size_id="",this.product.sizes.forEach(d=>{this.sizeStock[d.id]=this.stocks[this.form.color_id][d.id]})},"form.size_id"(){this.updateStock()}},computed:{isFormComplete(){return Object.values(this.form).every(d=>d!=="")}},mounted(){const d=this.product.colors.find(s=>s.total_stock>0);this.form.color_id=d.id},setup(d){return{form:P({product_id:d.product.id,color_id:"",size_id:"",quantity:1})}},layout:N},D={class:"px-0 xl:px-36 xl:pt-10 pb-10"},F={class:"flex flex-col xl:flex-row gap-4 xl:gap-14"},H={class:"w-screen xl:w-1/2 xl:flex gap-4"},O={class:"relative overflow-x-auto xl:overflow-y-auto snap-x snap-mandatory border-b xl:border-0"},T={class:"flex flex-row xl:flex-col xl:gap-2"},q=["src","onClick"],R={class:"hidden xl:block"},E=["src"],A={class:"flex-1 px-4 xl:px-0"},J={class:"mb-4"},W={class:"font-semibold text-lg"},G={class:"text-sm"},K={class:"flex gap-2 xl:gap-3 text-2xl border-b pb-4 mb-4"},Q={key:0,class:"text-slate-400 line-through"},X={class:"text-sm mb-4"},Y=e("div",{class:"font-semibold mb-2"},"Pilih Warna",-1),Z={class:"grid grid-cols-2 xl:grid-cols-4 gap-3"},$=["id","value","disabled","onChange"],ee=["for"],te={class:"text-sm mb-4"},oe=e("div",{class:"font-semibold mb-2"},"Pilih Ukuran",-1),se={class:"grid grid-cols-5 gap-3"},de=["id","value","disabled"],re=["for"],le={class:"mb-6"},ie={class:"text-sm font-semibold mb-2"},ce={class:"w-fit"},ne={class:"border-b mb-6 pb-6"},ae=["disabled"],ue=["innerHTML"];function me(d,s,o,a,i,r){const f=m("Head"),x=m("Notif"),u=m("NumberInput");return l(),c(_,null,[b(f,{title:o.product.name},null,8,["title"]),o.flash.error||o.flash.success?(l(),I(x,{key:0,flash:o.flash},null,8,["flash"])):k("",!0),e("div",D,[e("div",F,[e("div",H,[e("div",O,[e("div",T,[(l(!0),c(_,null,v(o.product.photos,t=>(l(),c("img",{src:t.url,onClick:h=>r.selectPhoto(t),class:p(["snap-start rounded-lg xl:w-40 p-1 cursor-pointer",t.name===i.selectedPhoto.name?"xl:bg-gray-100/60 xl:brightness-95 xl:border-0":"xl:border"])},null,10,q))),256))])]),e("div",R,[e("img",{src:i.selectedPhoto.url,class:"border rounded-2xl p-4"},null,8,E)])]),e("div",A,[e("div",J,[e("div",W,n(o.product.name),1),e("div",G,n(o.product.category.name),1)]),e("div",K,[e("div",{class:p(["font-bold",{"text-red-600":o.product.is_discount}])}," Rp"+n((o.product.is_discount?o.product.discount_price:o.product.price).toLocaleString("id-ID")),3),o.product.is_discount?(l(),c("div",Q," Rp"+n(o.product.price.toLocaleString("id-ID")),1)):k("",!0)]),e("div",X,[Y,e("div",Z,[(l(!0),c(_,null,v(o.product.colors,(t,h)=>(l(),c("div",null,[y(e("input",{id:"color"+t.id,"onUpdate:modelValue":s[0]||(s[0]=g=>a.form.color_id=g),value:t.id,disabled:t.total_stock<1,type:"radio",class:"hidden peer",onChange:g=>r.selectColorPhoto(h)},null,40,$),[[w,a.form.color_id]]),e("label",{for:"color"+t.id,class:"border rounded-lg block text-center py-2 select-none cursor-pointer peer-checked:border-lime-600 peer-checked:text-lime-600 peer-checked:bg-lime-100 peer-disabled:cursor-not-allowed peer-disabled:ring-0 peer-disabled:bg-gray-100 peer-disabled:text-gray-400"},n(t.name),9,ee)]))),256))])]),e("div",te,[oe,e("div",se,[(l(!0),c(_,null,v(o.product.sizes,t=>(l(),c("div",null,[y(e("input",{id:"size"+t.id,"onUpdate:modelValue":s[1]||(s[1]=h=>a.form.size_id=h),value:t.id,disabled:t.total_stock<1||i.sizeStock[t.id]<1,type:"radio",class:"hidden peer"},null,8,de),[[w,a.form.size_id]]),e("label",{for:"size"+t.id,class:"border rounded-lg block text-center py-2 select-none cursor-pointer peer-checked:border-lime-600 peer-checked:text-lime-600 peer-checked:bg-lime-100 peer-disabled:cursor-not-allowed peer-disabled:border-0 peer-disabled:bg-gray-100 peer-disabled:text-gray-400"},n(t.name),9,re)]))),256))])]),e("div",le,[e("div",ie,"Atur Jumlah "+n(i.stock),1),e("div",ce,[b(u,{modelValue:a.form.quantity,"onUpdate:modelValue":s[2]||(s[2]=t=>a.form.quantity=t),max:i.stock},null,8,["modelValue","max"])])]),e("div",ne,[e("button",{type:"button",onClick:s[3]||(s[3]=(...t)=>r.addCart&&r.addCart(...t)),disabled:!r.isFormComplete,class:"rounded-full bg-lime-600 hover:bg-lime-700 py-3 font-semibold text-white w-full disabled:cursor-not-allowed disabled:hover:bg-lime-600"}," Tambah ke keranjang ",8,ae)]),e("div",{innerHTML:o.product.description,class:"prose select-none"},null,8,ue)])])])],64)}const ke=C(B,[["render",me]]);export{ke as default};
