import{A as w}from"./AdminLayout-f4eea498.js";import{_ as V,T as j,r as u,o as a,c as d,a as m,b as e,F as l,h,w as _,v,k as M,n as U,f as z,s as C,d as I,t as p,q as S,j as R}from"./app-e00fb960.js";import{E as L,r as F,I as B}from"./ImagePreview-08ba4f19.js";import{r as T}from"./XMarkIcon-d2224846.js";import{r as D}from"./PlusIcon-5010ba4f.js";const E={data(){return{urlMainPhotos:[],urlVariantPhotos:[]}},components:{Editor:L,XMarkIcon:T,PlusIcon:D,PhotoIcon:F,ImagePreview:B},props:{categories:Object,colors:Object,sizes:Object},watch:{"form.colors"(){this.initializeVariant()}},methods:{formattedPrice(){let o=this.form.price.replace(/\D/g,"");o=o.replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.form.price=o},initializeVariant(){for(const o in this.form.colors){let s=this.form.colors[o];this.form.variant_photos[s]||(this.form.variant_photos[s]=""),this.form.stocks[s.id]||(this.form.stocks[s.id]={});for(const c in this.sizes){let i=this.sizes[c];this.form.stocks[s.id][i.id]||(this.form.stocks[s.id][i.id]=0)}}},uploadMainPhoto(o){this.form.main_photos[o]=event.target.files[0],this.urlMainPhotos[o]=URL.createObjectURL(event.target.files[0]),o<4&&this.form.main_photos.push("")},uploadVariantPhoto(o){this.form.variant_photos[o]=event.target.files[0],this.urlVariantPhotos[o]=URL.createObjectURL(event.target.files[0])},removeMainPhoto(o){this.form.main_photos.splice(o,1),this.urlMainPhotos.splice(o,1),(this.form.main_photos.length===0||this.form.main_photos[this.form.main_photos.length-1]!=="")&&this.form.main_photos.push("")},removeVariantPhoto(o){this.form.variant_photos[o]="",this.urlVariantPhotos[o]=""},addShoe(){this.form.price=this.form.price.replace(/\D/g,""),this.form.post(route("products.store"),{preserveScroll:!0})}},setup(){return{form:j({main_photos:[""],category:"",name:"",price:"",description:"",colors:[],variant_photos:[],stocks:{}})}},layout:w},N={class:"w-3/4 mx-auto pt-6 pb-12"},O=e("div",{class:"text-xl font-semibold mb-6"},"Tambah Produk",-1),H={class:"p-8 bg-white rounded-md shadow space-y-6 mb-4"},q={class:"text-sm flex gap-10 items-top"},A=e("div",{class:"w-[20%]"},[e("div",{class:"font-medium mb-2"},"Foto Produk"),e("div",{class:"text-xs text-zinc-500"}," Format gambar .jpg .jpeg .png dan rasio 1:1 (persegi). ")],-1),W={class:"flex-1 grid grid-cols-5 gap-2"},K=["for"],X={class:"w-full aspect-square flex flex-col gap-2 items-center justify-center rounded border border-dashed border-gray-300 hover:border-lime-600 text-zinc-500 hover:text-lime-600 overflow-hidden"},G={class:"text-xs select-none"},J=["id","onChange"],Q={class:"text-sm flex items-center gap-10"},Y=e("div",{class:"w-[20%] font-medium"},"Nama Produk",-1),Z={class:"text-sm flex items-center gap-10"},$=e("div",{class:"w-[20%] font-medium"},"Kategori Produk",-1),ee=e("option",{disabled:"",value:""},"Pilih kategori",-1),te=["value"],oe={class:"text-sm flex items-center gap-10"},se=e("div",{class:"w-[20%] font-medium"},"Harga",-1),ie={class:"flex-1 flex items-center border border-gray-200 bg-gray-100 rounded-md overflow-hidden"},re=e("div",{class:"text-sm text-gray-500 font-semibold px-3"},"Rp",-1),ae={class:"text-sm flex items-top gap-10"},de=e("div",{class:"w-[20%] font-medium"},"Deskripsi Produk",-1),ne={class:"flex items-top gap-10"},le=e("div",{class:"w-[20%] font-medium text-sm"},"Warna",-1),ce={class:"flex-1 grid grid-cols-5 gap-4"},me={class:"flex gap-2 items-center"},he=["value","id"],fe=["for"],ue={class:"flex items-top gap-10"},_e=e("div",{class:"w-[20%] font-medium text-sm"},"Variasi Produk",-1),pe={class:"flex-1 border divide-y text-sm rounded-sm"},ve=C('<div class="flex divide-x font-medium"><div class="w-[30%] px-4 py-2">Foto Produk</div><div class="w-[30%] px-4 py-2">Warna</div><div class="w-[20%] px-4 py-2">Ukuran</div><div class="w-[20%] px-4 py-2">Stok</div></div>',1),xe={class:"flex divide-x"},ge={class:"w-[30%] flex justify-center items-center"},be=["for"],ye={class:"h-28 w-28 flex flex-col gap-2 items-center justify-center rounded-md border border-dashed border-gray-300 hover:border-lime-600 text-zinc-500 hover:text-lime-600 overflow-hidden"},Pe=e("div",{class:"text-xs select-none"},"Tambah Foto",-1),ke=["id","onChange"],we={class:"w-[30%] flex items-center px-4"},Ve={class:"w-[20%] divide-y"},je={class:"px-4 py-2"},Me={class:"w-[20%] divide-y"},Ue=["onUpdate:modelValue"],ze={class:"flex justify-end gap-3 py-2 text-sm font-medium"};function Ce(o,s,c,i,x,n){const y=u("Head"),g=u("ImagePreview"),b=u("PhotoIcon"),P=u("Editor"),k=u("Link");return a(),d(l,null,[m(y,{title:"Tambah Produk"}),e("div",N,[O,e("div",H,[e("div",q,[A,e("div",W,[(a(!0),d(l,null,h(i.form.main_photos,(t,r)=>(a(),d("div",{key:r},[t?(a(),I(g,{key:0,source:x.urlMainPhotos[r],onRemovePhoto:f=>n.removeMainPhoto(r)},null,8,["source","onRemovePhoto"])):(a(),d("label",{key:1,for:"mainPhotos"+r,class:"flex flex-col items-center justify-center cursor-pointer"},[e("div",X,[m(b,{class:"w-8 h-8"}),e("div",G,"Foto "+p(r==0?"Sampul":"("+r+"/5)"),1)]),e("input",{id:"mainPhotos"+r,type:"file",class:"hidden",onChange:f=>n.uploadMainPhoto(r)},null,40,J)],8,K))]))),128))])]),e("div",Q,[Y,_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.form.name=t),type:"text",class:"text-sm flex-1 border-gray-200 rounded-md placeholder:text-neutral-400",placeholder:"Mohon masukkan"},null,512),[[v,i.form.name]])]),e("div",Z,[$,_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.form.category=t),class:U(["text-sm border-gray-200 rounded-md flex-1",{"text-gray-400":i.form.category===""}])},[ee,(a(!0),d(l,null,h(c.categories,t=>(a(),d("option",{value:t,class:"text-black"},p(t.name),9,te))),256))],2),[[M,i.form.category]])]),e("div",oe,[se,e("div",ie,[re,_(e("input",{type:"text",class:"text-sm border-0 focus:ring-0 w-full","onUpdate:modelValue":s[2]||(s[2]=t=>i.form.price=t),onInput:s[3]||(s[3]=(...t)=>n.formattedPrice&&n.formattedPrice(...t))},null,544),[[v,i.form.price]])])]),e("div",ae,[de,m(P,{modelValue:i.form.description,"onUpdate:modelValue":s[4]||(s[4]=t=>i.form.description=t),class:"flex-1"},null,8,["modelValue"])]),e("div",ne,[le,e("div",ce,[(a(!0),d(l,null,h(c.colors,(t,r)=>(a(),d("div",me,[_((a(),d("input",{"onUpdate:modelValue":s[5]||(s[5]=f=>i.form.colors=f),key:r,value:t,id:"color"+r,type:"checkbox",class:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-200 rounded focus:ring-blue-500"},null,8,he)),[[S,i.form.colors]]),e("label",{for:"color"+r,class:"text-sm select-none"},p(t.name),9,fe)]))),256))])]),e("div",ue,[_e,e("div",pe,[ve,(a(!0),d(l,null,h(i.form.colors,t=>(a(),d("div",xe,[e("div",ge,[i.form.variant_photos[t.id]?(a(),d("div",{key:t.id,class:"flex justify-center h-28 w-28"},[m(g,{source:x.urlVariantPhotos[t.id],onRemovePhoto:r=>n.removeVariantPhoto(t.id)},null,8,["source","onRemovePhoto"])])):(a(),d("label",{key:1,for:"variant_photos"+t.id,class:"flex flex-col items-center cursor-pointer"},[e("div",ye,[m(b,{class:"w-8 h-8"}),Pe]),e("input",{id:"variant_photos"+t.id,type:"file",class:"hidden",onChange:r=>n.uploadVariantPhoto(t.id)},null,40,ke)],8,be))]),e("div",we,p(t.name),1),e("div",Ve,[(a(!0),d(l,null,h(c.sizes,r=>(a(),d("div",je,p(r.name),1))),256))]),e("div",Me,[(a(!0),d(l,null,h(c.sizes,r=>(a(),d("div",null,[_(e("input",{type:"number",class:"w-full text-sm border-0 px-4","onUpdate:modelValue":f=>i.form.stocks[t.id][r.id]=f},null,8,Ue),[[v,i.form.stocks[t.id][r.id]]])]))),256))])]))),256))])])]),e("div",ze,[m(k,{href:o.route("products.index"),class:"border bg-white py-2 px-10 rounded"},{default:z(()=>[R(" Batal ")]),_:1},8,["href"]),e("button",{type:"button",onClick:s[6]||(s[6]=(...t)=>n.addShoe&&n.addShoe(...t)),class:"bg-lime-600 hover:bg-lime-700 disabled:bg-lime-500/50 text-white py-2 px-10 rounded"}," Simpan ")])])],64)}const Be=V(E,[["render",Ce]]);export{Be as default};
